(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{4420:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/album",function(){return t(2496)}])},2496:function(e,r,t){"use strict";t.r(r);var i=t(5838),n=t(6439),s=t(5893),l=t(7294),o=t(9008),d=t.n(o),a=t(1163);let c=["ark","arthur","awesome","compass","corset","desert","dust","fear","holotype","hungry","kobold","lookout","loser","match","memo","nope","outflank","passage","rude","saga","salty","sins","vest","winds","xerxes","yesterday"],x=[["#46425E","#D17C7C","#5B768D","#F6C6A8"]];r.default=()=>{let e=(0,a.useRouter)(),[r,t]=(0,l.useState)(!1),[o,p]=(0,l.useState)(null),[u,f]=(0,l.useState)(!1),[h,g]=(0,l.useState)(""),[j,m]=(0,l.useState)(""),[b,y]=(0,l.useState)(""),[v,C]=(0,l.useState)("saga"),[S,k]=(0,l.useState)(x[0]),[w,A]=(0,l.useState)(null),[F,N]=(0,l.useState)([{title:"",file:null,order:1,featuringArtist:"",songDescription:""}]),T=e=>{if(F.length>1){let r=F.filter((r,t)=>t!==e);r.forEach((e,r)=>{e.order=r+1}),N(r)}},q=(e,r,t)=>{let s=[...F];s[e]=(0,n._)((0,i._)({},s[e]),{[r]:t}),N(s)},D=e=>new Promise(r=>{let t=new Image;t.onload=()=>{64===t.width&&64===t.height?r(!0):(p("Album cover must be exactly 64x64 pixels (yours is ".concat(t.width,"x").concat(t.height,")")),r(!1))},t.onerror=()=>{p("Failed to load album cover image"),r(!1)},t.src=URL.createObjectURL(e)}),O=async()=>{if(!h.trim())return p("Album name is required"),!1;if(!j.trim())return p("Artist name is required"),!1;if(!w)return p("Album cover is required"),!1;if(w&&!w.name.toLowerCase().endsWith(".png"))return p("Album cover must be a PNG file"),!1;if(w&&!await D(w))return!1;if(0===F.length)return p("At least one song is required"),!1;for(let e=0;e<F.length;e++){let r=F[e];if(!r.title.trim())return p("Song ".concat(e+1,": Title is required")),!1;if(!r.file)return p("Song ".concat(e+1,": File is required")),!1;if(![".it",".s3m",".mod",".vgm"].some(e=>r.file.name.toLowerCase().endsWith(e)))return p("Song ".concat(e+1,": File must be .it, .s3m, .mod, or .vgm")),!1}return!0},_=async r=>{if(r.preventDefault(),p(null),await O()){t(!0);try{let r=new FormData;r.append("albumCover",w),F.forEach(e=>{e.file&&r.append("songFiles",e.file)});let t={albumName:h,artistName:j,fontChoice:v,palette:S,artistBiography:b||void 0,songs:F.map(e=>({title:e.title,order:e.order,featuringArtist:e.featuringArtist||void 0,songDescription:e.songDescription||void 0}))};r.append("data",JSON.stringify(t));let i=await fetch("https://album.bread.codes/upload",{method:"POST",body:r});if(!i.ok){let e=await i.json();throw Error(e.error||"Upload failed")}let n=(await i.json()).uploadId;e.push("/album/".concat(n))}catch(e){p(e instanceof Error?e.message:"An error occurred"),t(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d(),{children:(0,s.jsx)("title",{children:"Upload Album - bread.codes"})}),(0,s.jsxs)("div",{style:{backgroundColor:"#f0f0f0",padding:"20px",border:"3px solid #000",borderRadius:"0"},children:[(0,s.jsxs)("center",{children:[(0,s.jsx)("h1",{style:{fontFamily:"Comic Sans MS, cursive",color:"#ff0066",textShadow:"2px 2px #000",fontSize:"32px",marginBottom:"10px"},children:".:*~~*:. ALBUM UPLOAD .:*~~*:."}),(0,s.jsx)("p",{style:{fontFamily:"Arial, sans-serif",marginBottom:"20px"},children:(0,s.jsx)("marquee",{behavior:"alternate",width:"300",children:(0,s.jsx)("b",{children:"Upload your tracker music!"})})})]}),o&&(0,s.jsxs)("div",{style:{backgroundColor:"#ffcccc",border:"2px solid #ff0000",padding:"10px",marginBottom:"15px",fontFamily:"Arial, sans-serif"},children:[(0,s.jsx)("b",{children:"ERROR:"})," ",o]}),(0,s.jsxs)("form",{onSubmit:_,children:[(0,s.jsx)("table",{cellPadding:8,cellSpacing:0,border:1,style:{width:"100%",backgroundColor:"#ffffff",borderCollapse:"collapse"},children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{style:{backgroundColor:"#ffcc00"},children:(0,s.jsx)("td",{colSpan:2,children:(0,s.jsx)("b",{children:"ALBUM INFORMATION"})})}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{width:"30%",style:{backgroundColor:"#e0e0e0"},children:(0,s.jsx)("b",{children:"Album Name:*"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),required:!0,style:{width:"100%",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{backgroundColor:"#e0e0e0"},children:(0,s.jsx)("b",{children:"Artist Name:*"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",value:j,onChange:e=>m(e.target.value),required:!0,style:{width:"100%",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{backgroundColor:"#e0e0e0"},children:(0,s.jsx)("b",{children:"Font Choice:*"})}),(0,s.jsx)("td",{children:(0,s.jsx)("select",{value:v,onChange:e=>C(e.target.value),required:!0,style:{width:"100%",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"},children:c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{backgroundColor:"#e0e0e0"},children:(0,s.jsx)("b",{children:"Palette Choice:*"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsxs)("div",{onClick:()=>f(!u),style:{width:"100%",padding:"8px",border:"2px inset #ccc",backgroundColor:"#fff",cursor:"pointer",fontFamily:"Arial, sans-serif",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[S.map((e,r)=>(0,s.jsx)("div",{style:{width:"24px",height:"24px",backgroundColor:e,border:"1px solid #000"}},r)),(0,s.jsx)("span",{style:{marginLeft:"8px",fontSize:"12px"},children:S.join(" ")})]}),(0,s.jsx)("span",{children:u?"▲":"▼"})]}),u&&(0,s.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"#fff",border:"2px solid #000",zIndex:1e3,maxHeight:"300px",overflowY:"auto"},children:x.map(e=>(0,s.jsxs)("div",{onClick:()=>{k(e),f(!1)},style:{padding:"8px",cursor:"pointer",borderBottom:"1px solid #ccc",backgroundColor:S.join("-")===e.join("-")?"#e0e0e0":"#fff",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:r=>{S.join("-")!==e.join("-")&&(r.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:r=>{S.join("-")!==e.join("-")&&(r.currentTarget.style.backgroundColor="#fff")},children:[e.map((e,r)=>(0,s.jsx)("div",{style:{width:"32px",height:"32px",backgroundColor:e,border:"1px solid #000"}},r)),(0,s.jsx)("span",{style:{fontSize:"12px",fontFamily:"monospace"},children:e.join(" ")})]},e.join("-")))})]})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{style:{backgroundColor:"#e0e0e0"},children:[(0,s.jsx)("b",{children:"Album Cover:*"}),(0,s.jsx)("br",{}),(0,s.jsx)("small",{children:"(PNG, exactly 64x64)"})]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("input",{type:"file",accept:".png",onChange:e=>{var r;return A((null===(r=e.target.files)||void 0===r?void 0:r[0])||null)},required:!0,style:{fontFamily:"Arial, sans-serif"}}),w&&(0,s.jsxs)("div",{style:{marginTop:"5px",fontSize:"12px"},children:["Selected: ",w.name]})]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{style:{backgroundColor:"#e0e0e0"},children:[(0,s.jsx)("b",{children:"Artist Biography:"}),(0,s.jsx)("br",{}),(0,s.jsx)("small",{children:"(optional)"})]}),(0,s.jsx)("td",{children:(0,s.jsx)("textarea",{value:b,onChange:e=>y(e.target.value),rows:4,style:{width:"100%",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"}})})]})]})}),(0,s.jsxs)("div",{style:{marginTop:"20px"},children:[(0,s.jsx)("table",{cellPadding:8,cellSpacing:0,border:1,style:{width:"100%",backgroundColor:"#ffffff",borderCollapse:"collapse"},children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{style:{backgroundColor:"#00ccff"},children:(0,s.jsx)("td",{colSpan:2,children:(0,s.jsx)("b",{children:"SONGS"})})}),F.map((e,r)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)("tr",{style:{backgroundColor:"#ccffcc"},children:(0,s.jsxs)("td",{colSpan:2,children:[(0,s.jsxs)("b",{children:["Song #",e.order]}),F.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>T(r),style:{marginLeft:"10px",padding:"2px 8px",backgroundColor:"#ff6666",border:"2px outset #ff3333",cursor:"pointer",fontFamily:"Arial, sans-serif"},children:"Remove"})]})}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{width:"30%",style:{backgroundColor:"#e0e0e0"},children:(0,s.jsx)("b",{children:"Song Title:*"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",value:e.title,onChange:e=>q(r,"title",e.target.value),required:!0,style:{width:"100%",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{style:{backgroundColor:"#e0e0e0"},children:[(0,s.jsx)("b",{children:"Song File:*"}),(0,s.jsx)("br",{}),(0,s.jsx)("small",{children:"(.it, .s3m, .mod, .vgm)"})]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("input",{type:"file",accept:".it,.s3m,.mod,.vgm",onChange:e=>{var t;return q(r,"file",(null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},required:!0,style:{fontFamily:"Arial, sans-serif"}}),e.file&&(0,s.jsxs)("div",{style:{marginTop:"5px",fontSize:"12px"},children:["Selected: ",e.file.name]})]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{backgroundColor:"#e0e0e0"},children:(0,s.jsx)("b",{children:"Order:"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",value:e.order,onChange:e=>q(r,"order",parseInt(e.target.value)||1),min:1,required:!0,style:{width:"80px",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{style:{backgroundColor:"#e0e0e0"},children:[(0,s.jsx)("b",{children:"Featuring Artist:"}),(0,s.jsx)("br",{}),(0,s.jsx)("small",{children:"(optional)"})]}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",value:e.featuringArtist,onChange:e=>q(r,"featuringArtist",e.target.value),style:{width:"100%",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{style:{backgroundColor:"#e0e0e0"},children:[(0,s.jsx)("b",{children:"Song Description:"}),(0,s.jsx)("br",{}),(0,s.jsx)("small",{children:"(optional)"})]}),(0,s.jsx)("td",{children:(0,s.jsx)("textarea",{value:e.songDescription,onChange:e=>q(r,"songDescription",e.target.value),rows:2,style:{width:"100%",padding:"4px",border:"2px inset #ccc",fontFamily:"Arial, sans-serif"}})})]})]},r))]})}),(0,s.jsx)("center",{style:{marginTop:"10px"},children:(0,s.jsx)("button",{type:"button",onClick:()=>{N([...F,{title:"",file:null,order:F.length+1,featuringArtist:"",songDescription:""}])},style:{padding:"8px 20px",backgroundColor:"#66ff66",border:"3px outset #33cc33",cursor:"pointer",fontFamily:"Comic Sans MS, cursive",fontSize:"14px",fontWeight:"bold"},children:"+ ADD ANOTHER SONG +"})})]}),(0,s.jsx)("center",{style:{marginTop:"20px"},children:(0,s.jsx)("button",{type:"submit",disabled:r,style:{padding:"12px 40px",backgroundColor:r?"#cccccc":"#ff6600",border:"3px outset #cc5500",cursor:r?"not-allowed":"pointer",fontFamily:"Comic Sans MS, cursive",fontSize:"18px",fontWeight:"bold",color:"#ffffff",textShadow:"1px 1px #000"},children:r?"UPLOADING...":">>> SUBMIT ALBUM <<<"})})]}),(0,s.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#ffffcc",border:"2px dashed #000",fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[(0,s.jsx)("b",{children:"* = Required field"}),(0,s.jsx)("br",{}),"Album cover must be PNG format and exactly 64x64 pixels!",(0,s.jsx)("br",{}),"Song files must be tracker formats: .it, .s3m, .mod, or .vgm"]})]})]})}},9008:function(e,r,t){e.exports=t(3867)},1163:function(e,r,t){e.exports=t(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4420)}),_N_E=e.O()}]);