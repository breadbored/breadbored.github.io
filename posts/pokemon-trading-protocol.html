<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/8b2cf8539f1a157d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8b2cf8539f1a157d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-cefafc4da0529542.js" defer=""></script><script src="/_next/static/chunks/main-02216dd25b6676c5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-102e13f31ba96a81.js" defer=""></script><script src="/_next/static/chunks/811-964c5cbec40e2b0f.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-37182098a1e49792.js" defer=""></script><script src="/_next/static/c2sJn_Mh8S1CcuUz3UwSB/_buildManifest.js" defer=""></script><script src="/_next/static/c2sJn_Mh8S1CcuUz3UwSB/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"/><link rel="preload" as="image" href="/bsky/images/pokemon-trading-protocol-8-0.jpg"/><link rel="preload" as="image" href="/bsky/images/pokemon-trading-protocol-10-0.jpg"/><link rel="preload" as="image" href="/bsky/images/pokemon-trading-protocol-10-1.jpg"/><div id="__next"><div style="margin:0 10%"><div class="page-width mx-auto mt-12"><div class="pb-12 pt-6 text-center bg-white"><marquee class="my-4" behavior="alternate">HTML Is My Passion</marquee><h1 class="text-4xl font-bold mb-2">bread.codes</h1><h3 class="text-xl mb-4">code stuff</h3><nav class="space-x-4 mb-8"><a class="hover:text-blue-600" href="/">Home</a><a class="hover:text-blue-600" href="/search">Search</a><a class="hover:text-blue-600" href="/about">About</a><a class="hover:text-blue-600" href="/archive">Archive</a></nav><div role="group" tabindex="0" aria-label="Audio player" class="rhap_container rhap_loop--on rhap_play-status--paused mb-4"><audio src="/assets/Linkin-Park-Numb.mp3" loop="" autoPlay="" preload="auto"></audio><div class="rhap_header">Linkin-Park-Numb.mp3</div><div class="rhap_main rhap_stacked"><div class="rhap_progress-section"><div id="rhap_current-time" class="rhap_time rhap_current-time">--:--</div><div class="rhap_progress-container" aria-label="Audio progress control" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0"><div class="rhap_progress-bar rhap_progress-bar-show-download"><div class="rhap_progress-indicator" style="left:0%"></div><div class="rhap_progress-filled" style="width:0%"></div></div></div><div class="rhap_time rhap_total-time">--:--</div></div><div class="rhap_controls-section"><div class="rhap_additional-controls"><button aria-label="Disable loop" class="rhap_button-clear rhap_repeat-button" type="button"><span></span></button></div><div class="rhap_main-controls"><button aria-label="Play" class="rhap_button-clear rhap_main-controls-button rhap_play-pause-button" type="button"><span></span></button></div><div class="rhap_volume-controls"><div class="rhap_volume-container"><button aria-label="Mute" type="button" class="rhap_button-clear rhap_volume-button"><span></span></button><div role="progressbar" aria-label="Volume control" aria-valuemin="0" aria-valuemax="100" aria-valuenow="NaN" tabindex="0" class="rhap_volume-bar-area"><div class="rhap_volume-bar"><div class="rhap_volume-indicator" style="left:40.00%;transition-duration:0s"></div></div></div></div></div></div></div></div><main class="px-4"><article class="max-w-2xl mx-auto px-4"><h1 class="text-4xl font-bold mb-4">Pokemon Trading Protocol</h1><div class="mb-8 text-gray-600">December 31, 2024</div><div class="prose max-w-none"><div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">I was not the first person to do it, but I reverse engineered the Pokémon Gen 1 trading protocol some time ago

I reminisce about this project often, so I thought I&#x27;d make a thread about how it works!

#reverseengineering #retrogamedev #retrogaming #pokemon

[1/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">So the first thing to understand is that the Game Boy used a bastardized version of SPI for communication, just without the Chip Select line since the Game Boy could be connected to only one other device... but if that device is another Game Boy, who&#x27;s in control of the clock?

[2/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">The quirky part of this is that they have a pecking order in Pokémon to decide who&#x27;s in control. The first one to successfully send a byte becomes the Primary (formerly &quot;master&quot;) and the receiver becomes the Secondary (formerly &quot;slave&quot;)... how do you make this consistent?

[3/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Well, you of course give up control, and you never send a byte until the other GB takes control. This is how I managed the state of the trades, because by always waiting for the other GB, the Primary always polled when ready. Now what?

[4/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Well, the Primary sends packets to check if we&#x27;re still there, which we acknowledge (0x00) in a response. You do this until the other GB reports that it is at a Pokémon Center and is at the link counter. When they are ready, we start the handshake process.

[5/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Here&#x27;s where the actual protocol starts.  Since we&#x27;re the Secondary, we are being polled by the Primary so that we don&#x27;t accidentally go too fast

Now we say we are also at the link counter and want to trade.

[6/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">We wait for a READY (0xFD) and respond READY. We do it again... and again... and again, but this time we respond with a 0x00. I don&#x27;t actually know why this was necessary 4 times.

Now we are in a &quot;waiting&quot; state. This state is used to send our Pokemon in their entirety to the other GB.

[7/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Here&#x27;s where we take a detour from the protocol itself

We don&#x27;t just send basic info about our &#x27;mons, we send every byte of the Pokemon almost exactly as they would be in our party and some info about ourselves.

[8/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">In short, here is the order of what we are sending:
- Trainer Name (11 bytes, 0x50 terminated string [in English])
- Selected Pokemon (1 byte for num of mons in party + 6 bytes each representing the mons&#x27; true ID)
- Party Member (6 whole Pokemon, each 44 bytes [discussed later])

[9/18]</p><div class="bsky-images"><img src="/bsky/images/pokemon-trading-protocol-8-0.jpg" alt="A C code block showing the packet structure of a trade" class="bsky-image"/></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">[cont]
- OG Trainer Names (an array containing 6 names, each 11 bytes long and 0x50 terminated [in english], with the same index as the party mons)
- Mon Nicknames (^ read above note)

[10/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">To explain how the mons are structured, here is the struct I made [left] and the function that turns the struct to an array of bytes (because I was using u32 for u24 numbers, u8 for nibbles, and the wrong endianness, it didn&#x27;t align) [right]

I wish I had space to explain this better

[11/18]</p><div class="bsky-images"><img src="/bsky/images/pokemon-trading-protocol-10-0.jpg" alt="A C code block showing the structure of Pokemon in Red, Blue, Green, Yellow. Note that there are comments in the code, which I will refer to, but will also explain" class="bsky-image"/><img src="/bsky/images/pokemon-trading-protocol-10-1.jpg" alt="C code showing how the previous structure is converted to an array of bytes" class="bsky-image"/></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">For those who are not sight impaired (sorry for the poor alt text), you might be noticing my comments about how this matches the save file. Well, that&#x27;s because Pokémon just copies your Pokémon directly from RAM and sends all of it over the wire.

[12/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Interesting bits:
- Mons can have 2 types, but if they don&#x27;t, they usually have the same type twice
- catch_rate_or_held_item is a byte that is different in Gen 1 &amp; 2. Held items didn&#x27;t exist until Gen 2, and they dropped catch rate because it was redundant

[13/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">[cont]
- Experience is complicated math with several variables. I just used EXP calculators
- EVs are 2 bytes long, but IVs are a nibble (4 bits / ½ byte)

Let&#x27;s get back to the protocol. Did you forget about it?

[14/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">We have sent our mons to each other after 197 messages. Now the Primary tells us it&#x27;s status with a byte, which should have bits 5 and 6 set to high indicating it is ready. If it sends an ERROR (0x6f), we start over. Otherwise, bits 0-3 indicate the index of the mon it wants to trade.

[15/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Since we are faking mons on the Secondary, we can send whatever we want, I just fill my party with Mews while we&#x27;re trading info, and send index 0 (status 0x60) when it&#x27;s time.

Once we have responded with this status, the trade has started.

[16/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">The Primary sends 0x00, we respond with 0x00, and we repeat until the animation is done.

After that? We&#x27;re done! We *should* restart the process and have some handling for trading again, but this is where I end my explanation.

[17/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Thank you to #GBDK (gbdk-2020) (and @bbbbbr.bsky.social as a major maintainer, please follow them) for enabling my project
Thank you to Bulbapedia and it&#x27;s maintainers for documenting the Party and Bill&#x27;s PC Pokémon data structure
Thank you for reading! lmk if you like this type of content

[18/18]</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div>
<div class="bsky"><div class="bsky-header"><div class="bsky-avatar"><img src="https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg" alt="avatar" class="profile-image-m"/></div><div class="bsky-author"><a href="https://bsky.app/profile/breadcodes - GBA dev.bread.codes" class="bsky-author-link" target="_blank"><span class="bsky-author-display-name">breadcodes - GBA dev</span><br/><span class="bsky-author-handle">bread.codes</span></a></div></div><div class="bsky-content"><p class="bsky-text" style="white-space:pre-wrap;text-align:left">Fun tidbits:

I accidentally found a way to destroy someone&#x27;s save file. A real GB virus by corrupting the mon just right.

I originally did this on a Pi, but decided that the barrier for others doing this was too high. I ended up rewriting this for the GB to be run from a flash cartridge</p><div class="bsky-images"></div></div><div class="bsky-footer"><div class="bsky-date">08.12.2024<!-- --> <!-- -->1:08</div><div class="bsky-icon"><span class="icon no-invert"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2F%3E" alt="Blue Sky Logo" class="icon__alt" aria-hidden="true" width="0" height="0"/><svg width="20" height="20"><use xlink:href="/assets/icons.svg#blue-sky" class=""></use></svg></span></div></div></div></div></article></main></div></div><footer class="page-width text-center py-4 space-y-4 mx-auto"><div><img alt="IE Logo" loading="lazy" width="88" height="31" decoding="async" data-nimg="1" class="inline mx-1" style="color:transparent" src="/assets/ie_logo.gif"/><img alt="Netscape Logo" loading="lazy" width="88" height="31" decoding="async" data-nimg="1" class="inline mx-1" style="color:transparent" src="/assets/ns_logo.gif"/><img alt="Notepad" loading="lazy" width="88" height="31" decoding="async" data-nimg="1" class="inline mx-1" style="color:transparent" src="/assets/notepad.gif"/></div><div><img alt="Pokemon" loading="lazy" width="88" height="31" decoding="async" data-nimg="1" class="inline mx-1" style="color:transparent" src="/assets/pokemon3.gif"/><a href="mailto:brad@bread.codes"><img alt="Email Me" loading="lazy" width="88" height="31" decoding="async" data-nimg="1" class="inline mx-1" style="color:transparent" src="/assets/emailme.gif"/></a><img alt="Pokemon" loading="lazy" width="88" height="31" decoding="async" data-nimg="1" class="inline mx-1" style="color:transparent" src="/assets/pokemon3.gif"/></div><div style="background-color:#f0f0f0"><p><b>Copyright © <!-- -->2025<!-- --> BreadCodes</b></p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Pokemon Trading Protocol","date":"2025-01-01","slug":"pokemon-trading-protocol","excerpt":"https://bsky.app/profile/bread.codes/post/3lcrkdbj7tk2m","content":"https://bsky.app/profile/bread.codes/post/3lcrkdbj7tk2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjhnk2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjhnl2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjhnm2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjhnn2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjhno2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjhnp2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjimx2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdbjjm72m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdcok6h2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdcouw72m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdegqyx2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdegqyy2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdegrya2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdegryb2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdegryc2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdegryd2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdegtwt2m\n\nhttps://bsky.app/profile/bread.codes/post/3lcrkdermo32m","categories":["pokemon","gameboy","game boy","retro-computing"],"skeets":[{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbj7tk2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbj7tk2m","text":"I was not the first person to do it, but I reverse engineered the Pokémon Gen 1 trading protocol some time ago\n\nI reminisce about this project often, so I thought I'd make a thread about how it works!\n\n#reverseengineering #retrogamedev #retrogaming #pokemon\n\n[1/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.054Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjhnk2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjhnk2m","text":"So the first thing to understand is that the Game Boy used a bastardized version of SPI for communication, just without the Chip Select line since the Game Boy could be connected to only one other device... but if that device is another Game Boy, who's in control of the clock?\n\n[2/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.055Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjhnl2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjhnl2m","text":"The quirky part of this is that they have a pecking order in Pokémon to decide who's in control. The first one to successfully send a byte becomes the Primary (formerly \"master\") and the receiver becomes the Secondary (formerly \"slave\")... how do you make this consistent?\n\n[3/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.056Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjhnm2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjhnm2m","text":"Well, you of course give up control, and you never send a byte until the other GB takes control. This is how I managed the state of the trades, because by always waiting for the other GB, the Primary always polled when ready. Now what?\n\n[4/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.057Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjhnn2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjhnn2m","text":"Well, the Primary sends packets to check if we're still there, which we acknowledge (0x00) in a response. You do this until the other GB reports that it is at a Pokémon Center and is at the link counter. When they are ready, we start the handshake process.\n\n[5/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.058Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjhno2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjhno2m","text":"Here's where the actual protocol starts.  Since we're the Secondary, we are being polled by the Primary so that we don't accidentally go too fast\n\nNow we say we are also at the link counter and want to trade.\n\n[6/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.059Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjhnp2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjhnp2m","text":"We wait for a READY (0xFD) and respond READY. We do it again... and again... and again, but this time we respond with a 0x00. I don't actually know why this was necessary 4 times.\n\nNow we are in a \"waiting\" state. This state is used to send our Pokemon in their entirety to the other GB.\n\n[7/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.060Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjimx2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjimx2m","text":"Here's where we take a detour from the protocol itself\n\nWe don't just send basic info about our 'mons, we send every byte of the Pokemon almost exactly as they would be in our party and some info about ourselves.\n\n[8/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.061Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdbjjm72m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdbjjm72m","text":"In short, here is the order of what we are sending:\n- Trainer Name (11 bytes, 0x50 terminated string [in English])\n- Selected Pokemon (1 byte for num of mons in party + 6 bytes each representing the mons' true ID)\n- Party Member (6 whole Pokemon, each 44 bytes [discussed later])\n\n[9/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.062Z","embed":{"$type":"app.bsky.embed.images","images":[{"alt":"A C code block showing the packet structure of a trade","aspectRatio":{"width":866,"height":386},"image_url":"/bsky/images/pokemon-trading-protocol-8-0.jpg"}]},"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdcok6h2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdcok6h2m","text":"[cont]\n- OG Trainer Names (an array containing 6 names, each 11 bytes long and 0x50 terminated [in english], with the same index as the party mons)\n- Mon Nicknames (^ read above note)\n\n[10/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.063Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdcouw72m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdcouw72m","text":"To explain how the mons are structured, here is the struct I made [left] and the function that turns the struct to an array of bytes (because I was using u32 for u24 numbers, u8 for nibbles, and the wrong endianness, it didn't align) [right]\n\nI wish I had space to explain this better\n\n[11/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.064Z","embed":{"$type":"app.bsky.embed.images","images":[{"alt":"A C code block showing the structure of Pokemon in Red, Blue, Green, Yellow. Note that there are comments in the code, which I will refer to, but will also explain","aspectRatio":{"width":1692,"height":2000},"image_url":"/bsky/images/pokemon-trading-protocol-10-0.jpg"},{"alt":"C code showing how the previous structure is converted to an array of bytes","aspectRatio":{"width":1587,"height":2000},"image_url":"/bsky/images/pokemon-trading-protocol-10-1.jpg"}]},"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdegqyx2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdegqyx2m","text":"For those who are not sight impaired (sorry for the poor alt text), you might be noticing my comments about how this matches the save file. Well, that's because Pokémon just copies your Pokémon directly from RAM and sends all of it over the wire.\n\n[12/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.065Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdegqyy2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdegqyy2m","text":"Interesting bits:\n- Mons can have 2 types, but if they don't, they usually have the same type twice\n- catch_rate_or_held_item is a byte that is different in Gen 1 \u0026 2. Held items didn't exist until Gen 2, and they dropped catch rate because it was redundant\n\n[13/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.066Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdegrya2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdegrya2m","text":"[cont]\n- Experience is complicated math with several variables. I just used EXP calculators\n- EVs are 2 bytes long, but IVs are a nibble (4 bits / ½ byte)\n\nLet's get back to the protocol. Did you forget about it?\n\n[14/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.067Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdegryb2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdegryb2m","text":"We have sent our mons to each other after 197 messages. Now the Primary tells us it's status with a byte, which should have bits 5 and 6 set to high indicating it is ready. If it sends an ERROR (0x6f), we start over. Otherwise, bits 0-3 indicate the index of the mon it wants to trade.\n\n[15/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.068Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdegryc2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdegryc2m","text":"Since we are faking mons on the Secondary, we can send whatever we want, I just fill my party with Mews while we're trading info, and send index 0 (status 0x60) when it's time.\n\nOnce we have responded with this status, the trade has started.\n\n[16/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.069Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdegryd2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdegryd2m","text":"The Primary sends 0x00, we respond with 0x00, and we repeat until the animation is done.\n\nAfter that? We're done! We *should* restart the process and have some handling for trading again, but this is where I end my explanation.\n\n[17/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.070Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdegtwt2m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdegtwt2m","text":"Thank you to #GBDK (gbdk-2020) (and @bbbbbr.bsky.social as a major maintainer, please follow them) for enabling my project\nThank you to Bulbapedia and it's maintainers for documenting the Party and Bill's PC Pokémon data structure\nThank you for reading! lmk if you like this type of content\n\n[18/18]","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.071Z","embed":null,"indexedAt":null},{"url":"https://bsky.app/profile/bread.codes/post/3lcrkdermo32m","uri":"at://did:plc:mkvb2iguo4rjzi4guolw7bbt/app.bsky.feed.post/3lcrkdermo32m","text":"Fun tidbits:\n\nI accidentally found a way to destroy someone's save file. A real GB virus by corrupting the mon just right.\n\nI originally did this on a Pi, but decided that the barrier for others doing this was too high. I ended up rewriting this for the GB to be run from a flash cartridge","author":{"did":"did:plc:mkvb2iguo4rjzi4guolw7bbt","handle":"bread.codes","displayName":"breadcodes - GBA dev","avatar":"https://cdn.bsky.app/img/avatar/plain/did:plc:mkvb2iguo4rjzi4guolw7bbt/bafkreiflkzhj5nlxibsolqlhhpjgevscfoz74xsll3o4p7ytnzcsllokdi@jpeg"},"createdAt":"2024-12-08T06:08:09.072Z","embed":null,"indexedAt":null}]}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"pokemon-trading-protocol"},"buildId":"c2sJn_Mh8S1CcuUz3UwSB","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>